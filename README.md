# Invoice Data Parser

[![clasp](https://img.shields.io/badge/built%20with-clasp-4285f4.svg)](https://github.com/google/clasp)
[![CircleCI](https://circleci.com/gh/sasalatart/invoice-data-parser.svg?style=svg)](https://circleci.com/gh/sasalatart/invoice-data-parser)

[GAS](https://developers.google.com/apps-script) script that lets users introduce their own invoice
data generated by the Chilean Taxing authorities (SII), and parses it into a "dynamic table
friendly" format.

## Dev Setup

1. Make sure that you have [CLASP](https://github.com/google/clasp/) installed
2. Login with CLASP via `clasp login`
3. Create a Google Spreadsheet
4. Click on "Tools" -> "Script editor"
5. Within the script, select "File" -> "Project properties"
6. Copy the script id shown
7. Open a new shell, and clone and cd into this repository
8. Run `yarn install` to install dependencies
9. Run `clasp setting scriptId <your-script-id>`
10. Run `yarn deploy`, so your Google Spreadsheet is now attached to the script.

## Usage

1. Open your spreadsheet
2. Make sure there is a sheet called "in"
3. Copy and paste your personal invoices data obtained from the SII into the sheet
4. Click on "SII" -> "Transformar", and wait for the execution to finish.

You should now see the data transformed into the new format, and also should have received an email
with the results.

## Linting

```sh
$ yarn lint
```

## Deploy

1. Make sure you are logged in with CLASP as per the Dev Setup instructions.
2. Make sure you have set up your script id as per the Dev Setup instructions.
3. Run `yarn deploy` to update your remote GAS code with your local code.
